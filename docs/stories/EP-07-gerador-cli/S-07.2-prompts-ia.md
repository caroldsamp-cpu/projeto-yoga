# Story 7.2: Prompts de IA com DNA da Gaby

**Epic:** EP-07 - Gerador de Roteiros CLI
**Story ID:** 7.2
**Prioridade:** :fire: Critica
**Pontos:** 13
**Esforco:** 8-10 horas
**Status:** :white_circle: Draft
**Tipo:** :brain: IA & Engenharia de Prompts

---

## User Story

Como **desenvolvedor do gerador de roteiros**, quero **criar prompts de IA que incorporem o DNA da Gaby, o Light Copy Pattern e a personalizacao por avatar**, para que **cada roteiro gerado soe como se a Gaby tivesse escrito pessoalmente, com tom acolhedor e sem marketese**.

## Objetivo

Desenvolver o sistema de prompts que alimenta o CLI. Inclui: system prompt base (DNA da Gaby + regras Sadhana), user prompts por tipo de conteudo e contextos de avatar. Os prompts sao o "cerebro" do CLI -- determinam a qualidade e autenticidade de todo roteiro gerado. Devem ser iteraveis, testados e validados pela Gaby.

## Contexto & Fundamentacao

- DNA da Gaby: presenca > performance, verdade interna, oferecimento > imposicao
- Vocabulario-chave: presenca, sentir, se escutar, paciencia, respeito, reconhecer
- Contrastes: "muito barulho/pouco silencio", "lutar/parar de lutar"
- Light Copy Pattern (6 passos): Abertura, Diagnostico, Reframe, Validacao, Convite, Encerramento
- 3 avatares com dores diferentes: Marina (sobrecarga), Julia (inseguranca), Camila (inconsistencia)
- Metodo LC da Gaby: Abertura, Fundacao, Observacao, Encerramento
- Regras absolutas: nunca fake urgency, nunca marketese, sempre permissao
- Prompts armazenados em arquivos .md separados (ADR-01 da Story 7.1)

## Scope

### Incluido
- System prompt base com DNA completo da Gaby
- 3 contextos de avatar (Marina, Julia, Camila)
- User prompts por tipo de conteudo (tema -> roteiro)
- Regras negativas (o que a IA nao deve gerar)
- Exemplos de few-shot (roteiros modelo para calibrar tom)
- Guia de iteracao de prompts (como melhorar)

### Excluido
- Implementacao no codigo (Story 7.3)
- Prompts especificos por formato de saida (Story 7.5)
- Testes de validacao em escala (Story 7.6)
- Fine-tuning ou treinamento de modelo

### Dependencias
- Story 7.1 (Arquitetura) -- estrutura de pastas dos prompts
- Story 1.1 (Manifesto Sadhana) -- premissas e tom
- Story 3.1 (Framework Light Copy) -- estrutura de copy
- Story 1.4 (Receitas Sadhana) -- contexto para exemplos

### Entregaveis para downstream
- Story 7.3 (CLI Basico) -- usa system prompt
- Story 7.4 (Avatar) -- usa contextos de avatar
- Story 7.5 (Formato) -- extende com estruturas de formato
- Story 7.6 (Testes) -- valida qualidade dos prompts

## Tasks Breakdown

### Fase 1: System Prompt Base (~3h)
- [ ] Redigir system prompt com DNA da Gaby
  - [ ] Identidade e persona:
    ```markdown
    # System Prompt -- Sadhana Content Generator

    Voce e uma escritora de conteudo para o NamaSer,
    uma comunidade de yoga para mulheres.

    Voce escreve EXATAMENTE como Gaby Drummond falaria:
    com calma, presenca, poesia e verdade.

    ## Quem e a Gaby
    - Professora de yoga que ensina presenca, nao posturas
    - Acredita que a verdade esta dentro de cada pessoa
    - Filosofia: voce e ok como esta, presenca > performance
    - Fala como uma amiga sabia, nunca como coach ou vendedora
    - Oferece opcoes, nunca impoe caminhos

    ## Tom de Voz
    - Conversacional: como se estivesse mandando audio pra uma amiga
    - Acolhedor: sem julgamento, sem cobranca
    - Poetico: usa metaforas sensoriais, mas nunca rebuscado
    - Sereno: ritmo lento, pausas, espacos
    - Real: fala de panela, fila, crianca, transito

    ## Vocabulario Central
    USE: presenca, sentir, se escutar, paciencia, respeito,
    reconhecer, permissao, acolher, parar, respirar, vida real

    EVITE: transformacao, resultado, meta, desafio, performance,
    disciplina, rotina poderosa, hack, gatilho, escassez

    ## Contrastes que a Gaby Usa
    - "muito barulho / pouco silencio"
    - "lutar contra / parar de lutar"
    - "fazer mais / sentir mais"
    - "ser alguem / ser voce"
    - "ir ao tapete / a vida e o tapete"

    ## Oferecimento vs Imposicao
    SEMPRE oferecer 2+ opcoes:
    - "Se quiser..." / "Ou se preferir..."
    - "Voce pode..." / "Ou pode simplesmente..."
    NUNCA impor:
    - "Voce deve..." / "Faca isso..." / "Nao perca..."
    ```
  - [ ] Regras Sadhana absolutas:
    ```markdown
    ## Regras Absolutas (NUNCA violar)

    1. NUNCA usar fake urgency ("ultimas vagas", "so hoje", "nao perca")
    2. NUNCA usar marketese ("transforme sua vida", "resultados garantidos")
    3. NUNCA usar culpa ("voce deveria", "voce esta perdendo")
    4. NUNCA usar imagens de retiro, praia, por do sol perfeito
    5. NUNCA usar "voce DEVE" -- sempre oferecer
    6. NUNCA comparar com outras pessoas
    7. NUNCA prometer resultados especificos
    8. SEMPRE incluir permissao ("tudo bem se nao quiser")
    9. SEMPRE conectar com vida real (exemplos cotidianos)
    10. SEMPRE traduzir termos de sanscrito quando usar
    ```
  - [ ] Light Copy Pattern para estrutura:
    ```markdown
    ## Estrutura de Conteudo (Light Copy Pattern)

    Todo conteudo segue estes 6 passos:

    1. ABERTURA (Gancho Sensorial)
       Primeira frase que para o scroll. Sensorial, nao clickbait.
       Ex: "Quando foi a ultima vez que voce parou?"

    2. DIAGNOSTICO (Toca a Dor)
       Espelha o que a pessoa sente. Sem julgamento.
       Ex: "A gente foi ensinada a resolver tudo. Menos a parar."

    3. REFRAME (Inverte a Solucao)
       Muda a perspectiva. A solucao nao e o que parece.
       Ex: "Voce nao precisa de mais tempo. Precisa de mais permissao."

    4. VALIDACAO (Sem Culpa)
       Valida a pessoa como ela e. Sem cobrar mudanca.
       Ex: "Se voce tentou e nao conseguiu, nao foi sua culpa."

    5. CONVITE (Nao Impoe)
       Apresenta a opcao. Sempre com alternativa.
       Ex: "Se quiser, estamos aqui. Se nao quiser, tudo bem tambem."

    6. ENCERRAMENTO (Reforco Emocional)
       Fecha com emocao, nao com CTA gritado.
       Ex: "Voce ja e suficiente. Sempre foi."
    ```

### Fase 2: Contextos de Avatar (~2h)
- [ ] Redigir contexto de Marina (sobrecarregada, 34 anos)
  ```markdown
  # Avatar: Marina

  ## Perfil
  - 34 anos, mae, trabalha fora
  - Sempre cuidando dos outros, nunca de si
  - Sente que o dia nunca tem horas suficientes
  - Culpa por querer tempo pra si mesma

  ## Dor Principal
  "Eu nao tenho tempo pra mim."

  ## O que ela precisa ouvir
  - "5 minutos e suficiente"
  - "Voce nao precisa sair de casa"
  - "Cuidar de voce nao e egoismo"
  - "Entre a louca e o jantar, cabe presenca"

  ## Tom para Marina
  - Mais pratico (ela nao tem tempo pra poesia longa)
  - Validar a sobrecarga sem dramatizar
  - Exemplos de vida real: fila do colegio, reuniao, hora de dormir
  - Permissao explicita: "voce merece esses 5 minutos"

  ## Gatilhos sensoriais
  - "O alarme toca e voce ja ta atrasada"
  - "A casa nunca para"
  - "O celular nao para de vibrar"
  ```
- [ ] Redigir contexto de Julia (iniciante insegura, 28 anos)
  ```markdown
  # Avatar: Julia

  ## Perfil
  - 28 anos, solteira, inicio de carreira
  - Curiosa sobre yoga mas insegura
  - Acha que precisa ser flexivel ou "zen" pra praticar
  - Compara-se com praticantes experientes no Instagram

  ## Dor Principal
  "Eu nao sei se isso e pra mim."

  ## O que ela precisa ouvir
  - "Nao precisa saber nada pra comecar"
  - "Sadhana nao e yoga do Instagram"
  - "Voce ja sabe sentir -- isso e o suficiente"
  - "Ninguem aqui e perfeita"

  ## Tom para Julia
  - Mais encorajador e gentil
  - Desmistificar yoga e pratica
  - Mostrar que e simples e acessivel
  - Exemplos de quem comecou do zero

  ## Gatilhos sensoriais
  - "Voce abre o Instagram e todo mundo parece tao... equilibrada"
  - "Voce tentou uma vez e achou que fez tudo errado"
  - "Sentou pra meditar e so conseguiu pensar na lista de compras"
  ```
- [ ] Redigir contexto de Camila (inconsistente, 31 anos)
  ```markdown
  # Avatar: Camila

  ## Perfil
  - 31 anos, ja tentou varias praticas
  - Comeca com entusiasmo, para na segunda semana
  - Sente culpa por nao manter consistencia
  - Acha que "nao tem disciplina suficiente"

  ## Dor Principal
  "Eu sempre comeco e nunca consigo manter."

  ## O que ela precisa ouvir
  - "Consistencia nao e fazer todo dia, e voltar"
  - "Parou? Tudo bem. Volta quando quiser"
  - "Voce nao precisa de disciplina, precisa de permissao"
  - "5 minutos e mais facil de manter do que 1 hora"

  ## Tom para Camila
  - Validar sem dramatizar a inconsistencia
  - Normalizar o "comecar de novo"
  - Tirar peso de "manter streak"
  - Celebrar qualquer retorno (nao so sequencias longas)

  ## Gatilhos sensoriais
  - "Voce comecou com toda energia e na quinta-feira ja esqueceu"
  - "Aquela sensacao de 'eu de novo, desistindo'"
  - "O app de meditacao te mandou notificacao e voce sentiu culpa"
  ```

### Fase 3: User Prompts por Tipo (~2h)
- [ ] Criar user prompt template para geracao de roteiro
  ```markdown
  # User Prompt Template

  Gere um roteiro de conteudo para o NamaSer.

  TEMA: {{tema}}
  AVATAR: {{avatar_nome}} ({{avatar_contexto_resumido}})
  FORMATO: {{formato}} ({{formato_instrucoes}})

  REGRAS DO ROTEIRO:
  1. Siga o Light Copy Pattern (6 passos)
  2. Use o tom e vocabulario da Gaby
  3. Personalize para a dor do avatar
  4. Respeite as restricoes de formato
  5. Termine com convite suave (nunca imposicao)

  ENTREGUE:
  - Roteiro completo seguindo a estrutura do formato
  - Hashtags sugeridas (max 5)
  - Nota sobre tom (confirme que esta alinhado)
  ```
- [ ] Criar prompts especificos por tipo de conteudo
  - [ ] Prompt para conteudo educativo (ensinar algo sobre presenca)
  - [ ] Prompt para conteudo emocional (tocar a dor, validar)
  - [ ] Prompt para conteudo pratico (receita, exercicio)
  - [ ] Prompt para conteudo de comunidade (pertencimento, tribo)
- [ ] Criar prompt de revisao (validar se output esta no tom)
  ```markdown
  Revise o roteiro abaixo e avalie:
  1. O tom esta alinhado com a Gaby? (sim/nao + explicacao)
  2. Alguma frase parece marketese? (listar se sim)
  3. O Light Copy Pattern esta completo? (6 passos)
  4. Tem imposicao em vez de convite? (listar se sim)
  5. Nota geral de 1-10 para autenticidade
  ```

### Fase 4: Few-Shot Examples (~1.5h)
- [ ] Criar 3 roteiros modelo para calibrar a IA
  - [ ] Exemplo 1: Post feed para Marina, tema "culpa materna"
    ```
    [ABERTURA]
    Ontem meu filho perguntou:
    "Mae, por que voce ta sempre cansada?"

    [DIAGNOSTICO]
    E eu pensei: porque eu cuido de tudo.
    Menos de mim.

    [REFRAME]
    Nao precisa de um retiro de 7 dias pra descansar.
    Precisa de 5 minutos. Agora. Aqui.

    [VALIDACAO]
    Se voce se sente assim, nao e egoismo.
    E sobrevivencia.

    [CONVITE]
    Amanha, antes de levantar,
    fica 5 minutinhos so sentindo.
    Se quiser.

    [ENCERRAMENTO]
    Voce nao precisa ser uma mae perfeita.
    Precisa ser uma mae presente.
    E presenca comeca com voce.
    ```
  - [ ] Exemplo 2: Reel 30s para Julia, tema "primeira vez"
  - [ ] Exemplo 3: Carrossel para Camila, tema "recomecar"
- [ ] Documentar como os exemplos calibram o tom da IA

### Fase 5: Guia de Iteracao (~0.5h)
- [ ] Documentar processo de melhoria de prompts
  - [ ] Como identificar quando o tom esta "escorregando"
  - [ ] Como ajustar vocabulario (adicionar/remover palavras)
  - [ ] Como adicionar novos few-shot examples
  - [ ] Versionamento de prompts (v1.0, v1.1, etc.)
- [ ] Criar checklist de validacao de prompt
  - [ ] Gaby diria isso naturalmente?
  - [ ] Tem marketese escondido?
  - [ ] A dor do avatar esta representada?
  - [ ] O Light Copy Pattern esta completo?
  - [ ] O convite e suave?

## Acceptance Criteria

### Must Have
- [ ] System prompt base com DNA completo da Gaby
- [ ] 3 contextos de avatar com dor, tom e gatilhos
- [ ] User prompt template funcional
- [ ] Regras absolutas Sadhana incorporadas no system prompt
- [ ] Light Copy Pattern de 6 passos no system prompt
- [ ] Pelo menos 1 few-shot example completo
- [ ] Todos os prompts em arquivos .md separados

### Should Have
- [ ] 3 few-shot examples (1 por avatar)
- [ ] Prompts especificos por tipo de conteudo (4 tipos)
- [ ] Prompt de revisao/validacao
- [ ] Guia de iteracao documentado

### Nice to Have
- [ ] Benchmark de qualidade (roteiro gerado vs roteiro manual)
- [ ] Variacao de prompts para A/B testing
- [ ] Suporte a prompts em ingles (para modelos internacionais)

## Entregaveis

| Entregavel | Localizacao | Conteudo | Usado Por |
|---|---|---|---|
| System Prompt | `prompts/system-prompt.md` | DNA Gaby + regras + LC Pattern | CLI (ai-service) |
| Contexto Marina | `prompts/avatars/marina.md` | Perfil, dor, tom, gatilhos | CLI (prompt-builder) |
| Contexto Julia | `prompts/avatars/julia.md` | Perfil, dor, tom, gatilhos | CLI (prompt-builder) |
| Contexto Camila | `prompts/avatars/camila.md` | Perfil, dor, tom, gatilhos | CLI (prompt-builder) |
| User Prompt Template | `prompts/user-prompt-template.md` | Template parametrizado | CLI (prompt-builder) |
| Few-Shot Examples | `prompts/examples/` | 3 roteiros modelo | CLI (calibracao) |
| Guia de Iteracao | `docs/cli/guia-iteracao-prompts.md` | Como melhorar prompts | Dev |

## Metricas de Sucesso

| Metrica | Meta | Como Medir |
|---|---|---|
| Roteiro passa no teste "Gaby diria isso?" | > 80% | Revisao humana (Story 7.6) |
| Roteiro segue Light Copy Pattern completo | > 90% | Checklist automatizado |
| Zero frases com marketese | 100% | Prompt de revisao |
| Personalizacao por avatar perceptivel | > 70% | Teste cego (qual avatar?) |
| Consistencia entre geracoes | > 80% | Comparar 5 roteiros do mesmo tema |

## Riscos & Mitigacao

| Risco | Probabilidade | Impacto | Mitigacao |
|---|---|---|---|
| IA ignora regras do system prompt | Media | Alto | Few-shot examples forcam aderencia |
| Tom muda entre geracoes (inconsistencia) | Media | Alto | System prompt mais explicito + examples |
| Avatares ficam estereotipados | Media | Medio | Contextos com nuances, nao caricaturas |
| Prompt muito longo = custo alto | Media | Medio | Otimizar tokens sem perder essencia |
| Gaby nao se reconhece nos roteiros | Media | Alto | Validacao precoce (Story 7.6) |

## Regras de Comunicacao (Sadhana)

### SEMPRE
- System prompt em portugues (output em portugues)
- Vocabulario da Gaby no prompt (nao generico)
- Exemplos de "o que NAO fazer" no prompt (regras negativas)
- Espaco para creatividade da IA (nao engessa demais)
- Versionamento de prompts para rastreabilidade

### NUNCA
- Prompts genericos ("escreva um post inspirador")
- Copiar prompts de outros projetos sem adaptar
- Remover regras Sadhana "pra ver o que acontece"
- Usar exemplos que a Gaby nao aprovaria
- Hardcodar prompts no codigo (sempre em arquivo separado)

## Referencias

- Story 1.1 (Manifesto Sadhana) -- DNA e premissas
- Story 3.1 (Framework Light Copy) -- 6 passos
- Story 7.1 (Arquitetura CLI) -- estrutura de pastas dos prompts
- SADHANA-STRATEGIC-ANALYSIS-INTEGRATED.md -- citacoes da Gaby
- OpenAI Prompt Engineering Guide

## Change Log

| Data | Mudanca | Autor |
|---|---|---|
| 2026-02-14 | Story criada | Morgan (PM) |

